version: "0.1"
name: "Creative Writing Assistant"
description: "A collaborative creative writing workflow that helps authors develop stories, characters, and narratives"
agents:
  concept_developer:
    model: "gpt-4"
    provider: "openai"
    prompt: "Develop a creative concept for a story based on this idea: {{input}}. Create compelling characters, setting, plot hooks, themes, and unique elements. Make it original and engaging."
    parameters:
      temperature: 0.8
      max_tokens: 1000

  character_designer:
    model: "claude-3-sonnet-20240229"
    provider: "anthropic"
    prompt: "Design detailed characters for this story concept: {{concept_developer.output}}. Create character profiles with backgrounds, motivations, flaws, strengths, relationships, and development arcs. Make them multidimensional and believable."
    parameters:
      temperature: 0.7
      max_tokens: 1200

  plot_architect:
    model: "gpt-4"
    provider: "openai"
    prompt: "Create a detailed plot structure for this story. Concept: {{concept_developer.output}}, Characters: {{character_designer.output}}. Include: inciting incident, rising action, climax, falling action, resolution, and subplot integration."
    parameters:
      temperature: 0.6
      max_tokens: 1100

  scene_writer:
    model: "claude-3-sonnet-20240229"
    provider: "anthropic"
    prompt: "Write the opening scene for this story. Plot outline: {{plot_architect.output}}, Characters: {{character_designer.output}}, Concept: {{concept_developer.output}}. Focus on establishing setting, introducing main character, and hooking the reader."
    parameters:
      temperature: 0.7
      max_tokens: 800

  editor:
    model: "gpt-4"
    provider: "openai"
    prompt: "Edit and improve this scene: {{scene_writer.output}}. Check for: pacing, character voice consistency, descriptive quality, dialogue naturalness, and emotional impact. Provide constructive feedback and suggest improvements."
    parameters:
      temperature: 0.4
      max_tokens: 900

  style_consultant:
    model: "claude-3-haiku-20240307"
    provider: "anthropic"
    prompt: "Analyze the writing style and voice in this scene: {{scene_writer.output}}. Assess: tone, vocabulary level, sentence structure variety, imagery effectiveness, and genre conventions. Suggest style refinements."
    parameters:
      temperature: 0.5
      max_tokens: 600

  revision_specialist:
    model: "gpt-4"
    provider: "openai"
    prompt: "Revise this scene based on editorial feedback: {{editor.output}} and style suggestions: {{style_consultant.output}}. Original scene: {{scene_writer.output}}. Improve the writing while maintaining the author's voice and intent."
    parameters:
      temperature: 0.6
      max_tokens: 800

workflow:
  - type: agent
    step: "develop_concept"
    agent: "concept_developer"
    save: "story_concept"

  - type: agent
    step: "design_characters"
    agent: "character_designer"
    save: "character_profiles"

  - type: agent
    step: "architect_plot"
    agent: "plot_architect"
    save: "plot_structure"

  - type: agent
    step: "write_opening_scene"
    agent: "scene_writer"
    save: "opening_scene"

  - type: agent
    step: "edit_scene"
    agent: "editor"
    save: "editorial_feedback"

  - type: agent
    step: "analyze_style"
    agent: "style_consultant"
    save: "style_analysis"

  - type: conditional
    step: "quality_assessment"
    if: "{{editorial_feedback | regex_search(r'Overall quality: (\\w+)') | lower in ['excellent', 'good']}}"
    then:
      - type: agent
        step: "final_polish"
        agent: "revision_specialist"
        context: "Perform final polishing and minor improvements."
        save: "final_scene"
    else:
      - type: agent
        step: "major_revision"
        agent: "revision_specialist"
        context: "Make significant improvements based on editorial feedback."
        save: "revised_scene"
      - type: agent
        step: "final_review"
        agent: "editor"
        save: "final_feedback"
      - type: agent
        step: "final_polish"
        agent: "revision_specialist"
        context: "Final polishing after major revisions."
        save: "final_scene"